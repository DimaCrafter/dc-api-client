parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"YEFD":[function(require,module,exports) {
function e(e){if(!e)return null;let s=[],t=[],n=[],o=null;const r=JSON.stringify(e,(e,r)=>{if(!e)return s.push(r),r;for(;t.length&&t[0]!==this;)t.shift(),n.pop();return void 0!==r?r instanceof Blob?(o||(o=new FormData),"."==(e=n.join(".")+"."+e)[0]&&(e=e.slice(1)),void o.append(e,r)):(s.find(e=>e===r)||(n.push(e),t.unshift(r),s.push(r)),r):void 0});return o?(o.append("json",r),o):r}module.exports=function(s,t,n,o=null,r=null){return new Promise(a=>{var i=new XMLHttpRequest;o=e(o),r=r?"?"+Object.entries(r).map(e=>e[0]+"="+e[1]).join("&"):"",i.open(o?"POST":"GET",`${s.secure?"https":"http"}://${s.base}/${t}/${n}${r}`),"string"==typeof o&&i.setRequestHeader("Content-type","application/json");let p,c=localStorage.getItem("session");c&&i.setRequestHeader("Session",c),i.send(o),i.onerror=(()=>{a({success:!1,code:i.status,msg:i.statusText||i.response||"NetworkError"})}),i.onreadystatechange=(()=>{switch(i.readyState){case i.HEADERS_RECEIVED:("application/octet-stream"==(p=i.getResponseHeader("content-type"))||p.startsWith("image/"))&&(i.responseType="blob")}}),i.onload=(()=>{if((c=i.getResponseHeader("session"))&&localStorage.setItem("session",c),"application/json"==p)try{a({success:200==i.status,code:i.status,msg:JSON.parse(i.response)})}catch(e){a({success:!1,code:-1,msg:e})}else a({success:200==i.status,code:i.status,msg:i.response})})})};
},{}],"ARwr":[function(require,module,exports) {
class t{constructor(t){this._events={},this._connection=null,this.socket=null;const s=e=>{this._socket=new WebSocket(`${t.settings.secure?"wss":"ws"}://${t.settings.base}/socket`),this._connection=new Promise(t=>{this._socket.onopen=(()=>{this._socket.send("session:"+localStorage.getItem("session")),this._connection=null,t(),this._dispatch("open",[e>0]),e=0})}),this._socket.onmessage=(t=>{var s=JSON.parse(t.data);"session"==s[0]&&localStorage.setItem("session",s[1]),this._dispatch(s[0],s.slice(1))}),this._socket.onclose=(n=>{this._socket._disableReconnect||-1!=t.settings.reconnectAttempts&&e==t.settings.reconnectAttempts?(this._dispatch("close",[n.code,n.reason]),this._socket=null):(this._dispatch("reconnect",[e+1]),setTimeout(()=>s(++e),1e3*t.settings.reconnectTimeout))})};s(0)}_dispatch(t,s){const e=this._events[t];if(e)for(let n=0;n<e.length;n++)e[n].apply(null,s),e[n].once&&e.splice(n,1)}on(t,s){this._events[t]?this._events[t].push(s):this._events[t]=[s]}once(t,s){s.once=!0,this.on(t,s)}off(t,s){const e=this._events[t];if(e){var n=e.findIndex(t=>t===s);~n&&e.splice(n,1)}}emit(){let t=[];for(let e=0;e<arguments.length;e++)t[e]=arguments[e];const s=()=>this._socket.send(JSON.stringify(t));this._connection?this._connection.then(s):s()}close(){this._socket._disableReconnect=!0,this._socket.close(),this._dispatch("close",[0,"ManualClose"]),this._events={}}}module.exports=(s=>(s._socketEmitter||(s._socketEmitter=new t(s),s._socketEmitter.on("close",()=>{s._socketEmitter=null})),s._socketEmitter));
},{}],"Focm":[function(require,module,exports) {
const e=require("./send"),t=require("./socket");function n(e,t,n,o){void 0===t[n]?e[n]=o:e[n]=t[n]}let o,s=!1;class r{constructor(e={}){n(this,e,"base",window.location.hostname),n(this,e,"secure",!0),n(this,e,"reconnectAttempts",5),n(this,e,"reconnectTimeout",2.5)}dev(e=null){if(null===e)return s;s=e,e&&(window.API=o)}}function i(n){return new Proxy(n,{get:(o,s)=>s in n?n[s]:"socket"==s.toLowerCase()?t(n):new Proxy({},{get:(t,o)=>(t,r)=>e(n.settings,s,o,t,r)})})}o=i({settings:new r,post(e,t,n=!1){var o=document.createElement("form");o.method="POST",o.action=e,n&&(o.target="_blank"),Object.entries(t).forEach(function(e){var t=document.createElement("input");t.name=e[0],t.value=e[1],o.appendChild(t)}),document.body.appendChild(o),o.submit(),o.remove()},instances:{},registerInstance(e,t){const n=i({settings:new r(t)});return this.instances[e]=n,n}}),"undefined"!=typeof module&&"undefined"!=typeof process?(o.settings.dev("development"===process.env.NODE_ENV),module.exports=o,module.exports.default=module.exports):window.API=o;
},{"./send":"YEFD","./socket":"ARwr"}]},{},["Focm"], null)